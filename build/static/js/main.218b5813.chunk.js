(this.webpackJsonpvc=this.webpackJsonpvc||[]).push([[0],{45:function(e,t,n){e.exports=n(84)},50:function(e,t,n){},77:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(42),r=n.n(c),i=(n(50),n(1)),s=n.n(i),u=n(2),l=n(5),d=n(12),m=n.n(d);var p=function(){var e,t,n,c,r=Object(a.useState)(),i=Object(l.a)(r,2),d=i[0],p=i[1],f=Object(a.useState)({}),v=Object(l.a)(f,2),b=(v[0],v[1],Object(a.useState)({})),w=Object(l.a)(b,2),g=(w[0],w[1],Object(a.useState)("")),h=Object(l.a)(g,2),k=h[0],y=h[1],x=m()("https://rtc-test-11.herokuapp.com/"),_=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],j=document.getElementById("room-selection-container"),O=(document.getElementById("room-input"),document.getElementById("connect-button"),document.getElementById("video-chat-container")),E=document.getElementById("local-video"),I=document.getElementById("remote-video"),C={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.enumerateDevices().then((function(e){console.log(e.filter((function(e){return"videoinput"==e.kind})))}));var S=function(){var e;""===(e=d)?alert("Please type a room ID"):(c=e,x.emit("join",e),j.style="display: none",O.style="display: block")};function D(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:!0,deviceId:k});case 3:a=t.sent,e=a,E.srcObject=a,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Could not get user media",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function R(t){e.getTracks().forEach((function(n){t.addTrack(n,e)}))}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createOffer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_offer",{type:"webrtc_offer",sdp:n,roomId:c});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createAnswer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_answer",{type:"webrtc_answer",sdp:n,roomId:c});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(e){I.srcObject=e.streams[0],e.stream}function A(e){e.candidate&&x.emit("webrtc_ice_candidate",{roomId:c,label:e.candidate.sdpMLineIndex,candidate:e.candidate.candidate})}return x.on("room_created",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_created"),e.next=3,D(C);case 3:t=!0;case 4:case"end":return e.stop()}}),e)})))),x.on("room_joined",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_joined"),e.next=3,D(C);case 3:x.emit("start_call",c);case 4:case"end":return e.stop()}}),e)})))),x.on("full_room",(function(){console.log("Socket event callback: full_room"),alert("The room is full, please try another one")})),x.on("start_call",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: start_call"),!t){e.next=8;break}return R(n=new RTCPeerConnection(_)),n.ontrack=M,n.onicecandidate=A,e.next=8,B(n);case 8:case"end":return e.stop()}}),e)})))),x.on("webrtc_offer",function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: webrtc_offer"),t){e.next=9;break}return R(n=new RTCPeerConnection(_)),n.ontrack=M,n.onicecandidate=A,n.setRemoteDescription(new RTCSessionDescription(a)),e.next=9,L(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.on("webrtc_answer",(function(e){console.log("Socket event callback: webrtc_answer"),n.setRemoteDescription(new RTCSessionDescription(e))})),x.on("webrtc_ice_candidate",(function(e){var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});n.addIceCandidate(t)})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"room-selection-container",className:"centered"},o.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)}}),o.a.createElement("input",{id:"room-input",type:"text",onChange:function(e){return p(e.target.value)}}),o.a.createElement("button",{id:"connect-button",onClick:function(e){return S()}},"CONNECT")),o.a.createElement("div",{id:"video-chat-container",className:"video-position"},o.a.createElement("video",{id:"local-video",autoPlay:!0,muted:"muted"}),o.a.createElement("video",{id:"remote-video",autoPlay:!0})))};var f=function(){var e,t,n,c,r=Object(a.useState)(),i=Object(l.a)(r,2),d=i[0],p=i[1],f=Object(a.useState)({}),v=Object(l.a)(f,2),b=(v[0],v[1],Object(a.useState)({})),w=Object(l.a)(b,2),g=(w[0],w[1],Object(a.useState)("")),h=Object(l.a)(g,2),k=h[0],y=h[1],x=m()("https://rtc-test-11.herokuapp.com"),_=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],j=document.getElementById("room-selection-container"),O=(document.getElementById("room-input"),document.getElementById("connect-button"),document.getElementById("video-chat-container")),E=document.getElementById("local-video"),I=document.getElementById("remote-video"),C={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.enumerateDevices().then((function(e){console.log(e.filter((function(e){return"videoinput"==e.kind})))}));var S=function(){var e;""===(e=d)?alert("Please type a room ID"):(c=e,x.emit("join",e),j.style="display: none",O.style="display: block")};function D(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:!0,deviceId:k});case 3:a=t.sent,e=a,E.srcObject=a,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Could not get user media",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function R(t){e.getTracks().forEach((function(n){t.addTrack(n,e)}))}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createOffer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_offer",{type:"webrtc_offer",sdp:n,roomId:c});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createAnswer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_answer",{type:"webrtc_answer",sdp:n,roomId:c});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(e){I.srcObject=e.streams[0],e.stream}function A(e){e.candidate&&x.emit("webrtc_ice_candidate",{roomId:c,label:e.candidate.sdpMLineIndex,candidate:e.candidate.candidate})}return x.on("room_created",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_created"),e.next=3,D(C);case 3:t=!0;case 4:case"end":return e.stop()}}),e)})))),x.on("room_joined",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_joined"),e.next=3,D(C);case 3:x.emit("start_call",c);case 4:case"end":return e.stop()}}),e)})))),x.on("full_room",(function(){console.log("Socket event callback: full_room"),alert("The room is full, please try another one")})),x.on("start_call",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: start_call"),!t){e.next=8;break}return R(n=new RTCPeerConnection(_)),n.ontrack=M,n.onicecandidate=A,e.next=8,B(n);case 8:case"end":return e.stop()}}),e)})))),x.on("webrtc_offer",function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: webrtc_offer"),t){e.next=9;break}return R(n=new RTCPeerConnection(_)),n.ontrack=M,n.onicecandidate=A,n.setRemoteDescription(new RTCSessionDescription(a)),e.next=9,L(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.on("webrtc_answer",(function(e){console.log("Socket event callback: webrtc_answer"),n.setRemoteDescription(new RTCSessionDescription(e))})),x.on("webrtc_ice_candidate",(function(e){var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});n.addIceCandidate(t)})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"room-selection-container",className:"centered"},o.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)}}),o.a.createElement("input",{id:"room-input",type:"text",onChange:function(e){return p(e.target.value)}}),o.a.createElement("button",{id:"connect-button",onClick:function(e){return S()}},"CONNECT")),o.a.createElement("div",{id:"video-chat-container",className:"video-position"},o.a.createElement("video",{id:"local-video",autoPlay:!0,muted:"muted"}),o.a.createElement("video",{id:"remote-video",autoPlay:!0})))};var v=function(){var e,t,n,c,r=Object(a.useState)(),i=Object(l.a)(r,2),d=i[0],p=i[1],f=Object(a.useState)({}),v=Object(l.a)(f,2),b=(v[0],v[1],Object(a.useState)({})),w=Object(l.a)(b,2),g=(w[0],w[1],Object(a.useState)("")),h=Object(l.a)(g,2),k=h[0],y=h[1],x=m()("https://rtc-test-11.herokuapp.com/"),_=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],j=document.getElementById("room-selection-container"),O=(document.getElementById("room-input"),document.getElementById("connect-button"),document.getElementById("video-chat-container")),E=document.getElementById("local-video"),I=document.getElementById("remote-video"),C={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.enumerateDevices().then((function(e){console.log(e.filter((function(e){return"videoinput"==e.kind})))}));var S=function(){var e;""===(e=d)?alert("Please type a room ID"):(c=e,x.emit("join",e),j.style="display: none",O.style="display: block")};function D(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:!0,deviceId:k});case 3:a=t.sent,e=a,E.srcObject=a,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Could not get user media",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function R(t){e.getTracks().forEach((function(n){t.addTrack(n,e)}))}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createOffer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_offer",{type:"webrtc_offer",sdp:n,roomId:c});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createAnswer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_answer",{type:"webrtc_answer",sdp:n,roomId:c});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(e){I.srcObject=e.streams[0],e.stream}function A(e){e.candidate&&x.emit("webrtc_ice_candidate",{roomId:c,label:e.candidate.sdpMLineIndex,candidate:e.candidate.candidate})}return x.on("room_created",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_created"),e.next=3,D(C);case 3:t=!0;case 4:case"end":return e.stop()}}),e)})))),x.on("room_joined",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_joined"),e.next=3,D(C);case 3:x.emit("start_call",c);case 4:case"end":return e.stop()}}),e)})))),x.on("full_room",(function(){console.log("Socket event callback: full_room"),alert("The room is full, please try another one")})),x.on("start_call",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: start_call"),!t){e.next=8;break}return R(n=new RTCPeerConnection(_)),n.ontrack=M,n.onicecandidate=A,e.next=8,B(n);case 8:case"end":return e.stop()}}),e)})))),x.on("webrtc_offer",function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: webrtc_offer"),t){e.next=9;break}return R(n=new RTCPeerConnection(_)),n.ontrack=M,n.onicecandidate=A,n.setRemoteDescription(new RTCSessionDescription(a)),e.next=9,L(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.on("webrtc_answer",(function(e){console.log("Socket event callback: webrtc_answer"),n.setRemoteDescription(new RTCSessionDescription(e))})),x.on("webrtc_ice_candidate",(function(e){var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});n.addIceCandidate(t)})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"room-selection-container",className:"centered"},o.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)}}),o.a.createElement("input",{id:"room-input",type:"text",onChange:function(e){return p(e.target.value)}}),o.a.createElement("button",{id:"connect-button",onClick:function(e){return S()}},"CONNECT")),o.a.createElement("div",{id:"video-chat-container",className:"video-position"},o.a.createElement("video",{id:"local-video",autoPlay:!0,muted:"muted"}),o.a.createElement("video",{id:"remote-video",autoPlay:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=n(43),w=n(3);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b.a,null,o.a.createElement(w.c,null,o.a.createElement(w.a,{path:"/",component:p}),o.a.createElement(w.a,{path:"/c2",component:f}),o.a.createElement(w.a,{path:"/c3",component:v})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.218b5813.chunk.js.map