(this.webpackJsonpvc=this.webpackJsonpvc||[]).push([[0],{45:function(e,t,n){e.exports=n(84)},50:function(e,t,n){},77:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(42),o=n.n(r),i=(n(50),n(1)),s=n.n(i),u=n(3),l=n(5),d=n(12),m=n.n(d);var p=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)({}),i=Object(l.a)(o,2),d=(i[0],i[1],Object(a.useState)({})),p=Object(l.a)(d,2),f=(p[0],p[1],m()("http://localhost:8000")),v=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{urls:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{urls:"turn:13.250.13.83:3478?transport=udp",username:"YzYNCouZM1mhqhmseWk6",credential:"YzYNCouZM1mhqhmseWk6"}]}),b=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0});case 2:return t=e.sent,v.addTrack(t.getVideoTracks()[0],t),e.next=6,v.createOffer();case 6:return a=e.sent,e.next=9,v.setLocalDescription(a);case 9:f.emit("offer_pc1",{id:n,offer:a}),v.onicecandidate=function(e){console.log(e.candidate),f.emit("candidate",{id:n,candidate:e.candidate})};case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f.on("answer_pc2",function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.setRemoteDescription(t);case 2:console.log(v);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f.on("candidate",(function(e){v.addIceCandidate(e)})),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"room-selection-container"},c.a.createElement("input",{type:"text",onChange:function(e){return r(e.target.value)}}),c.a.createElement("button",{onClick:function(e){f.emit("join",n)}},"CONNECT"),c.a.createElement("button",{onClick:function(e){return b()}},"CALL"),c.a.createElement("button",{onClick:function(e){}},"ANSWER")),c.a.createElement("div",{id:"video-chat-container"},"Local ",c.a.createElement("video",{id:"local-video",autoPlay:!0}),"Remote ",c.a.createElement("video",{id:"remote-video",autoPlay:!0})))};var f=function(){var e,t,n,r,o=Object(a.useState)(),i=Object(l.a)(o,2),d=i[0],p=i[1],f=Object(a.useState)({}),v=Object(l.a)(f,2),b=(v[0],v[1],Object(a.useState)({})),g=Object(l.a)(b,2),h=(g[0],g[1],Object(a.useState)("")),w=Object(l.a)(h,2),k=w[0],y=w[1],x=m()("https://rtc-test-11.herokuapp.com"),E=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],j=document.getElementById("room-selection-container"),O=(document.getElementById("room-input"),document.getElementById("connect-button"),document.getElementById("video-chat-container")),_=document.getElementById("local-video"),C=document.getElementById("remote-video"),I={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.enumerateDevices().then((function(e){console.log(e.filter((function(e){return"videoinput"==e.kind})))}));var S=function(){var e;""===(e=d)?alert("Please type a room ID"):(r=e,x.emit("join",e),j.style="display: none",O.style="display: block")};function D(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:!0,deviceId:k});case 3:a=t.sent,e=a,_.srcObject=a,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Could not get user media",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function R(t){e.getTracks().forEach((function(n){t.addTrack(n,e)}))}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createOffer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_offer",{type:"webrtc_offer",sdp:n,roomId:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createAnswer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_answer",{type:"webrtc_answer",sdp:n,roomId:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(e){C.srcObject=e.streams[0],e.stream}function A(e){e.candidate&&x.emit("webrtc_ice_candidate",{roomId:r,label:e.candidate.sdpMLineIndex,candidate:e.candidate.candidate})}return x.on("room_created",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_created"),e.next=3,D(I);case 3:t=!0;case 4:case"end":return e.stop()}}),e)})))),x.on("room_joined",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_joined"),e.next=3,D(I);case 3:x.emit("start_call",r);case 4:case"end":return e.stop()}}),e)})))),x.on("full_room",(function(){console.log("Socket event callback: full_room"),alert("The room is full, please try another one")})),x.on("start_call",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: start_call"),!t){e.next=8;break}return R(n=new RTCPeerConnection(E)),n.ontrack=M,n.onicecandidate=A,e.next=8,B(n);case 8:case"end":return e.stop()}}),e)})))),x.on("webrtc_offer",function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: webrtc_offer"),t){e.next=9;break}return R(n=new RTCPeerConnection(E)),n.ontrack=M,n.onicecandidate=A,n.setRemoteDescription(new RTCSessionDescription(a)),e.next=9,N(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.on("webrtc_answer",(function(e){console.log("Socket event callback: webrtc_answer"),n.setRemoteDescription(new RTCSessionDescription(e))})),x.on("webrtc_ice_candidate",(function(e){var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});n.addIceCandidate(t)})),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"room-selection-container",className:"centered"},c.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)}}),c.a.createElement("input",{id:"room-input",type:"text",onChange:function(e){return p(e.target.value)}}),c.a.createElement("button",{id:"connect-button",onClick:function(e){return S()}},"CONNECT")),c.a.createElement("div",{id:"video-chat-container",className:"video-position"},c.a.createElement("video",{id:"local-video",autoPlay:!0,muted:"muted"}),c.a.createElement("video",{id:"remote-video",autoPlay:!0})))};var v=function(){var e,t,n,r,o=Object(a.useState)(),i=Object(l.a)(o,2),d=i[0],p=i[1],f=Object(a.useState)({}),v=Object(l.a)(f,2),b=(v[0],v[1],Object(a.useState)({})),g=Object(l.a)(b,2),h=(g[0],g[1],Object(a.useState)("")),w=Object(l.a)(h,2),k=w[0],y=w[1],x=m()("https://rtc-test-11.herokuapp.com/"),E=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],j=document.getElementById("room-selection-container"),O=(document.getElementById("room-input"),document.getElementById("connect-button"),document.getElementById("video-chat-container")),_=document.getElementById("local-video"),C=document.getElementById("remote-video"),I={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.enumerateDevices().then((function(e){console.log(e.filter((function(e){return"videoinput"==e.kind})))}));var S=function(){var e;""===(e=d)?alert("Please type a room ID"):(r=e,x.emit("join",e),j.style="display: none",O.style="display: block")};function D(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:!0,deviceId:k});case 3:a=t.sent,e=a,_.srcObject=a,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Could not get user media",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function R(t){e.getTracks().forEach((function(n){t.addTrack(n,e)}))}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createOffer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_offer",{type:"webrtc_offer",sdp:n,roomId:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createAnswer();case 3:n=e.sent,t.setLocalDescription(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:x.emit("webrtc_answer",{type:"webrtc_answer",sdp:n,roomId:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(e){C.srcObject=e.streams[0],e.stream}function A(e){e.candidate&&x.emit("webrtc_ice_candidate",{roomId:r,label:e.candidate.sdpMLineIndex,candidate:e.candidate.candidate})}return x.on("room_created",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_created"),e.next=3,D(I);case 3:t=!0;case 4:case"end":return e.stop()}}),e)})))),x.on("room_joined",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Socket event callback: room_joined"),e.next=3,D(I);case 3:x.emit("start_call",r);case 4:case"end":return e.stop()}}),e)})))),x.on("full_room",(function(){console.log("Socket event callback: full_room"),alert("The room is full, please try another one")})),x.on("start_call",Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: start_call"),!t){e.next=8;break}return R(n=new RTCPeerConnection(E)),n.ontrack=M,n.onicecandidate=A,e.next=8,B(n);case 8:case"end":return e.stop()}}),e)})))),x.on("webrtc_offer",function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Socket event callback: webrtc_offer"),t){e.next=9;break}return R(n=new RTCPeerConnection(E)),n.ontrack=M,n.onicecandidate=A,n.setRemoteDescription(new RTCSessionDescription(a)),e.next=9,N(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.on("webrtc_answer",(function(e){console.log("Socket event callback: webrtc_answer"),n.setRemoteDescription(new RTCSessionDescription(e))})),x.on("webrtc_ice_candidate",(function(e){var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});n.addIceCandidate(t)})),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"room-selection-container",className:"centered"},c.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)}}),c.a.createElement("input",{id:"room-input",type:"text",onChange:function(e){return p(e.target.value)}}),c.a.createElement("button",{id:"connect-button",onClick:function(e){return S()}},"CONNECT")),c.a.createElement("div",{id:"video-chat-container",className:"video-position"},c.a.createElement("video",{id:"local-video",autoPlay:!0,muted:"muted"}),c.a.createElement("video",{id:"remote-video",autoPlay:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=n(43),g=n(2);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b.a,null,c.a.createElement(g.c,null,c.a.createElement(g.a,{path:"/c1",component:p}),c.a.createElement(g.a,{path:"/c2",component:f}),c.a.createElement(g.a,{path:"/c3",component:v})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.56534ea8.chunk.js.map